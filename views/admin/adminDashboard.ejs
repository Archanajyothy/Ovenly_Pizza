<%- include("../partials/adminHeader") -%>
<%- include("../partials/adminSidebar") -%>

        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb">
                <div class="row align-items-center">
                    <div class="col-5">
                        <h4 class="page-title">Dashboard</h4>
                        <div class="d-flex align-items-center">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Library</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                    <div class="col-7">
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Sales chart -->
                <!-- ============================================================== -->
                <div class="row">
                    <div class="card-body row col-12">
                        <div class="row col-4">
                          <div class="col-4">
                            <h5 class="card-title text-uppercase text-muted mb-0">Total Sales</h5>
                            <span class="h2 font-weight-bold mb-0">â‚¹<%= totalSales %></span>
                          </div>
                        </div>
                        
                        <div class="row col-4">
                            <div class="">
                              <h5 class="card-title text-uppercase text-muted mb-0">Total Orders</h5>
                              <span class="h2 font-weight-bold mb-0"><%= countOrders %></span>
                            </div>
                        </div>

                        <div class="row col-4">
                            <div class="">
                                <h5 class="card-title text-uppercase text-muted mb-0">Total Users</h5>
                                <span class="h2 font-weight-bold mb-0"><%= userCount %></span>
                            </div>
                        </div>
                    
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div style="width: 350px;">
                            <input type="hidden" id="category" value="<%= category %>">
                            <input type="hidden" id="count" value="<%= count %>">
                            <h3 class="text-danger text-center">Category Wise Sales</h3>
                            <canvas id="myChart"></canvas>
                        </div>
                        <script type="text/javascript" >
                            const count = document.getElementById('count')
                            // console.log('type:',typeof(count.value),' value:',count.value);
                            const countArray = count.value.split(',')
                            // console.log('type:',typeof(countArray),'values,',countArray);

                            const category = document.getElementById('category')
                            // console.log(' value:',category.value);
                            const categoryArray = category.value.split(',')
                            // console.log('values,',categoryArray);

                            const ctx = document.getElementById('myChart');
                            
                            new Chart(ctx, {
                              type: 'pie',
                              data: {
                                labels: categoryArray,
                                datasets: [{
                                  label: 'Pizza:',
                                  data: countArray,
                                  borderWidth: 1
                                }]
                              },

                            });
                          </script>                          
                    </div>
                    <div class="col-md-6">
                    <input type="hidden" id="weeklySales" value="<%= weeklySales %>">
                    <input type="hidden" id="wkDates" value="<%= wkDates %>">
                    <h3 class="text-danger text-center">Weekly Sales</h3>


                    <script>
                        var sales = document.getElementById("weeklySales")
                        const salesArray = sales.value.split(',')
                        var dates = document.getElementById("wkDates")
                        const datesArray = dates.value.split(',')
                        console.log("Sales : ",salesArray)
                        console.log("Dates : ",datesArray)
                    </script>  
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <canvas id="myLineChart"></canvas> <!-- Create a canvas element to hold the chart -->
                    <script>
                  
                      const ctx2 = document.getElementById('myLineChart').getContext('2d'); // Get the canvas element
                      const myChart2 = new Chart(ctx2, {
                        type: 'line', // Set chart type to line
                        data: {
                          labels: datesArray, // Get an array of dates for the x-axis labels
                          datasets: [{
                            label: "Sales", // Set dataset label
                            data: salesArray, // Get an array of sales values for the y-axis data
                            //backgroundColor: 'rgba(255, 99, 132, 0.2)', // Set background color for the area below the line
                            //borderColor: 'rgba(255, 99, 132, 1)', // Set border color for the line
                            borderWidth: 1 // Set border width for the line
                          }]
                        },
                        options: {
                          scales: {
                            y: {
                              beginAtZero: true // Set y-axis to start at zero
                            }
                          }
                        }
                      });
                    </script>         
                    </div>
                </div>


            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer text-center">
                All Rights Reserved.
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Wrapper -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- All Jquery -->
        <!-- ============================================================== -->
        <script src="assets/libs/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap tether Core JavaScript -->
        <script src="assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="dist/js/app-style-switcher.js"></script>
        <!--Wave Effects -->
        <script src="dist/js/waves.js"></script>
        <!--Menu sidebar -->
        <script src="dist/js/sidebarmenu.js"></script>
        <!--Custom JavaScript -->
        <script src="dist/js/custom.js"></script>
        <!--This page JavaScript -->
        <!--chartis chart-->
        <script src="assets/libs/chartist/dist/chartist.min.js"></script>
        <script src="assets/libs/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
        <script src="dist/js/pages/dashboards/dashboard1.js"></script>
        </body>

        </html>


